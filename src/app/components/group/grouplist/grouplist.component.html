<div class="Font">

  <nav class="main-header  fixed-top navbar navbar-expand-lg navbar-white navbar-light bd-light">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-widget="pushmenu"
      aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
      aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse " id="navbarText">
      <ul class="navbar-nav mr-auto ">
        <li *ngIf="auth.isLoggedIn()" class="nav-item active">
          <a class="nav-link " routerLink="/home">หน้าหลัก <span class="sr-only">(current)</span></a>
        </li>
        <li *ngIf="auth.isLoggedIn()" class="nav-item ">
          <a class="nav-link" routerLink="/houses"><i class="fa fa-home font-color-orange" aria-hidden="true"></i>
            อสังหาสิ่งปลูกสร้างของฉัน<span class="sr-only">(current)</span></a>
        </li>
        <li *ngIf="auth.isLoggedIn()" class="nav-item ">
          <a class="nav-link" routerLink="/lands"><i class="fa fa-tree font-color-green" aria-hidden="true"></i>
            ที่ดินของฉัน<span class="sr-only">(current)</span></a>
        </li>
        <li *ngIf="auth.isLoggedIn()" class="nav-item ">
          <a class="nav-link" routerLink="/groups"><i class="fa fa-users font-color-blue " aria-hidden="true"></i>
            กลุ่มของฉัน <span class="sr-only">(current)</span></a>
        </li>
        <li *ngIf="auth.isLoggedIn()" class="nav-item ">
          <a class="nav-link" routerLink="/recommend"><i class="fa fa-star font-color-gold" aria-hidden="true"></i>
            แนะนำ<span class="sr-only">(current)</span></a>
        </li>
        <li *ngIf="auth.isLoggedIn()" class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false"><i class="fas fa-plus-circle"></i>
            เพิ่มอสังหาริมทรัพย์
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" routerLink="/addhouse"><i class="fa fa-home font-color-orange "
                aria-hidden="true"></i> อสังหาสิ่งปลูกสร้าง</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" routerLink="/addlands"><i class="fa fa-tree font-color-green"
                aria-hidden="true"></i> ที่ดิน</a>
          </div>
        </li>
      </ul>
      <div class="d-flex flex-row-reverse">
        <ul class="navbar-nav mr-auto">
          <li *ngIf="auth.isLoggedIn()" class="nav-item">
            <a class="nav-link" routerLink="/profile"><img src="{{ auth.getUserDetails()?.Profile1}}" alt=""><i
                class="fa fa-user-circle"></i></a>
          </li>
          <li *ngIf="auth.isLoggedIn()" class="nav-item active">
            <a class="nav-link" routerLink="/profile">{{ auth.getUserDetails()?.Email }}</a>
          </li>
          <li *ngIf="auth.isLoggedIn()" class="nav-item">
            <a class="nav-link" routerLink="" (click)="auth.logout()">ออกจากระบบ</a>
          </li>
          <li *ngIf="!auth.isLoggedIn()" class="nav-item">
            <a class="nav-link" routerLink="/login">ลงชื่อเข้าใช้งาน</a>
          </li>
          <li *ngIf="!auth.isLoggedIn()" class="nav-item">
            <a class="nav-link" routerLink="/register">สมัคสมาชิก</a>
          </li>

        </ul>
      </div>
    </div>
  </nav>
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->

    <!-- Sidebar -->
    <div class="sidebar" data-widget="pushmenu">
      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
                     with font-awesome or any other icon font library -->
          <li class="nav-header">
            <h5>กลุ่ม</h5>
          </li>
          <li class="nav-header">
            <button type="button" class="btn btn-success" [routerLink]="['/groups/creategroup']"><i
              class="fas fa-plus-circle"></i> สร้างกลุ่มใหม่</button>
          </li>
          <div class="user-panel mt-3 pb-3 mb-3 d-flex">
            <div class="info">
              <a class="d-block"></a>
            </div>
          </div>
          <li class="nav-item has-treeview menu-open">
            <a  class="nav-link active">
              <i class="fas fa-users-cog"></i>
              <p>
                กลุ่มที่คุณจัดการ
                <i class="right fas fa-angle-left"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <div class="user-panel mt-3 pb-3 mb-3 d-flex" *ngFor="let group of Groups">
                <div class="image">
                  <img src="{{group.Img}}" class="img-circle elevation-2"
                    width="20px" height="20px">
                </div>
                <div class="info">
                  <a [routerLink]="['/groups/groupfolder',group.ID_Group]" (click)="reload()"
                    class="d-block">{{group.NameG}}</a>
                </div>
              </div>
            </ul>
          </li>
          <li class="nav-item has-treeview menu-open">
            <a  class="nav-link active">
              <i class="fas fa-users"></i>
              <p>
                กลุ่มที่คุณเป็นสมาชิก
                <i class="right fas fa-angle-left"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <div class="user-panel mt-3 pb-3 mb-3 d-flex" *ngFor="let group of GDetails">
                <div class="image">
                  <img src="{{group.Img}}" class="img-circle elevation-2"
                    width="20px" height="20px">
                </div>
                <div class="info">
                  <a [routerLink]="['/groups/member/groupfolder',group.ID_Group]"  class="d-block">{{group.NameG}}</a>
                </div>
              </div>
            </ul>
          </li>
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  <div class="content-wrapper">

    <div class="container" *ngFor="let group of GroupsDetail">
      <div id="product-container">
        <div class="row">
          <div class="col-md-12">
            <br>
            <br>
            <br>
            <ul id="breadcrumb-nav" typeof="BreadcrumbList">
              <li property="itemListElement" typeof="ListItem"><a [routerLink]="[ '/home' ]" property="item"
                  typeof="WebPage"><span property="name"><i class="fas fa-paper-plane"></i>
                    หน้าแรก</span></a>
                <meta property="position" content="1">
              </li>
              <li property="itemListElement" typeof="ListItem"><a [routerLink]="[ '/groups' ]" property="item"
                  typeof="WebPage"><span property="name">กลุ่มของฉัน</span></a>
                <meta property="position" content="2">
              </li>
              <li property="itemListElement" typeof="ListItem"><a [routerLink]="['/groups/groupfolder',group.ID_Group]"
                  property="item" typeof="WebPage"><span property="name"></span>{{group.NameG}}</a>
                <meta property="position" content="3">
              </li>
            </ul>
            <br>

            <div class="row">
              <div class="col-md-4">
                <div class="row">
                  <h1> <a [routerLink] data-toggle="modal" data-target="#Image"><img
                        src="{{group.Img}}" class="img-circle elevation-2"
                         width="65px" height="65px"></a> {{group.NameG}}</h1>
                  <div class="col-md-2"><a [routerLink] data-toggle="modal" data-target="#Name"><i
                        class="far fa-edit"></i></a>
                    <!-- Modal -->
                    <div class="modal fade" id="Name" tabindex="-1" role="dialog" aria-labelledby="Deletegroup"
                      aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="Name">แก้ไขชื่อกลุ่ม</h5>
                          </div>
                          <div class="modal-body">
                            <label for="">ชื่อกลุ่ม</label>
                            <input type="text" class="form-control" value="{{group.NameG}}"
                              (change)="onGroupname($event.target.value)">
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">ยกเลิก</button>
                            <button type="button" class="btn btn-success" data-dismiss="modal"
                              (click)="Editname()">บันทึก</button>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Modal Image-->
                    <div class="modal fade" id="Image" tabindex="-1" role="dialog" aria-labelledby="Deletegroup"
                      aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="Image">แก้ไขรูปภาพกลุ่ม</h5>
                          </div>
                          <div class="modal-body">
                            <div class="row">
                              <div class="col-md-12  ">
                                <div class="row">
                                  <div class="container jumbotron">
                                    <div class="container">
                                      <div class="row">
                                        <div class="col-md-12">
                                          <div class="row">
                                            <div class="col-sm-5 mx-auto" style="width: 500px;"
                                              *ngFor='let url of imagenew'>
                                              <button type="button" class="btn btn-outline-light">
                                                <button id="xButton" type="button" class="close" data-dismiss="alert"
                                                  aria-label="Close" (click)="onRemoveimage(url)">
                                                  <span aria-hidden="true">&times;</span>
                                                </button>
                                                <img class="card-img-top"
                                                  src="{{url.URL}}" width="200px"
                                                  height="150px">

                                              </button>
                                            </div>
                                          
                                            <div class="col-sm-5 mx-auto" style="width: 500px;"
                                              *ngFor='let url of localImageUrl'>
                                              <button type="button" class="btn btn-outline-light">
                                                <button id="xButton" type="button" class="close" data-dismiss="alert"
                                                  aria-label="Close" (click)="onRemoveFile(url)">
                                                  <span aria-hidden="true">&times;</span>
                                                </button>
                                                <img class="card-img-top" [src]="sanitizer.bypassSecurityTrustUrl(url)"
                                                  sizes="50px">
                                              </button>
                                            </div>
                                          </div>
                                          <br />
                                          <div class=" col-md-6 input-group mb-5 mx-auto" style="width: 300px;"
                                            *ngIf="renew==true">
                                            <div class="custom-file">
                                              <input type="file" class="custom-file-input" id="inputGroupFile01"
                                                name="file" ng2FileSelect [uploader]="uploader">
                                              <label class="custom-file-label"
                                                for="inputGroupFile01">เลือกรูปภาพ</label>
                                            </div>
                                          </div><br />

                                          <div class="col-md-6 mx-auto" style="width: 120px;">
                                            <button type="button" class="btn btn-success btn-s "
                                              (click)="uploader.uploadAll()"
                                              [disabled]="!uploader.getNotUploadedItems().length">
                                              <span class="glyphicon glyphicon-upload"></span> เพิ่มรูปภาพ
                                            </button>
                                          </div>
                                          <app-loading-spinner *ngIf="showSpinner2 == true"></app-loading-spinner>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">ยกเลิก</button>
                            <button type="button" class="btn btn-success" data-dismiss="modal">บันทึก</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-2">
                <!-- Button trigger modal -->
                <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#MemberList">
                  <i class="fas fa-users-cog"></i> แก้ไขสมาชิกกลุ่ม
                </button>

                <!-- Modal -->
                <div class="modal fade bd-example-modal-lg" id="MemberList" tabindex="-1" role="dialog"
                  aria-labelledby="MemberList" aria-hidden="true">
                  <div class="modal-dialog modal-lg " role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="MemberList">แก้ไขสมาชิกกลุ่ม</h5>
                      </div>
                      <div class="modal-body">
                        <div class="text-center">
                          <div class="row">
                            <div class="col-md-6">
                              <label for="">รายชื่อสมาชิกกลุ่ม</label>
                              <div class="row">
                                <div class="col-md-12">
                                  <ul class="nav nav-treeview">
                                    <div class="user-panel mt-3 pb-3 mb-3 d-flex" *ngFor="let item of Lists">
                                      <div class="image">
                                        <img src="{{item.ProfileImg}}"
                                          class="img-circle elevation-2" width="20px" height="20px">
                                      </div>
                                      <div class="info">
                                        
                                        <a  class="d-block">{{item.Firstname}} {{item.Lastname}} <a [routerLink] class=" tooltip-test"  title="ลบสมาชิก" style="color: crimson;" (click)="Deletemember(item.ID_User)" data-dismiss="modal"><i class="fas fa-minus-circle"></i></a></a>
                                      </div>
                                    </div>
                                  </ul>
                                </div>
                              </div>
                            </div>
                            <div class="col-md-6">
                                <label for="">เพิ่มสมาชิกกลุ่ม</label>
                                <div class="row">
                                  <div class="col-md-12">
                                      <div class="btn-toolbar mb-6" role="toolbar" aria-label="Toolbar with button groups">

                                          <div class="input-group">
                                            <input type="text" class="form-control" [(ngModel)]="credentials.Email" placeholder="กรอกอีเมล">
                                          </div>
                                          <div class="btn-group mr-6" role="group">
                                            <button class="btn btn-primary" type="button" (click)="Findmember()" ><i class="fas fa-search"></i></button>
                                          </div>
                                        </div>
                                        <br>
                                        <div *ngFor="let item of Member" class="col-md-6">
                                            <a class="" [routerLink]><img
                                                src="{{item.ProfileImg}}" class="img-circle "  width="70px"
                                                height="70px"></a>
                                            <div class="">{{item.Firstname}} {{item.Lastname}} </div>
                                            <br>
                                            <button class="btn btn-success" type="button" (click)="Addmember()" >เพิ่มลงกลุ่ม</button>
                                          </div>
                                  </div>
                                </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-2">
                <!-- Button trigger modal -->
                <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#Deletegroup">
                  <i class="fas fa-trash-alt"></i> ลบกลุ่มนี้
                </button>

                <!-- Modal -->
                <div class="modal fade" id="Deletegroup" tabindex="-1" role="dialog" aria-labelledby="Deletegroup"
                  aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="Deletegroup">ต้องการลบกลุ่มนี้ใช่หรือไม่?</h5>
                      </div>
                      <div class="modal-body">
                        <div class="text-center">
                          <div class="row">
                            <div class="col-md-6">
                              <button type="button" class="btn btn-success" (click)="onDeleteGroup()"
                                data-dismiss="modal">
                                <i class="fas fa-trash-alt"></i> ยืนยัน
                              </button>
                            </div>
                            <div class="col-md-6">
                              <button type="button" class="btn btn-danger" data-dismiss="modal">
                                ยกเลิก
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr>

    </div>
    <app-loading-spinner *ngIf="showSpinner==true"></app-loading-spinner>
    <div class="container" *ngIf="showSpinner==false">
      <div class="row">
        <div class="col-md-3">
          <div class="card">
            <div class="card-body">
              <i class="fas fa-folder-plus" style="color:rgb(255, 206, 47);"></i> <a routerLink data-toggle="modal"
                data-target="#Newfolder" class="card-link"> สร้างแฟ้มใหม่</a>
              <!-- Modal -->
              <div class="modal fade" id="Newfolder" tabindex="-1" role="dialog" aria-labelledby="Newfolder"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="Newfolder">สร้างแฟ้มใหม่</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <label for="">ชื่อแฟ้ม</label>
                      <input type="text" class="form-control" [(ngModel)]="credentials.NameF">
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">ยกเลิก</button>
                      <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="CreateFolder()"
                        [disabled]="credentials.NameF == ''">สร้างแฟ้ม</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3" *ngFor="let F of folder">
          <div class="card">
            <div class="card-body">
              <i class="fas fa-folder" style="color:rgb(23, 161, 53);"></i><a
                [routerLink]="['/groups/groupfolder/itemlist',F.ID_Folder]" class="card-link"> {{F.NameF}}</a>
            </div>
          </div>
        </div>
      </div>
    </div>




    <br><br><br><br><br><br>
    <br><br><br><br><br><br>
    <hr><br><br>

    <app-footer></app-footer>
  </div>
</div>
